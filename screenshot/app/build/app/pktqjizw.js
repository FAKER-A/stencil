/*! Built with http://stenciljs.com */
const{h:t}=window.App;import{a as s}from"./chunk-a8bc5fbd.js";import{f as a,g as e,h as n}from"./chunk-20186de4.js";class i{constructor(){this.appData={masterSnapshotId:null,snapshots:[]},this.isAdmin=!1,this.a=null,this.b=null}async componentWillLoad(){this.isAdmin="localhost"===window.location.hostname;try{const t=await fetch("/screenshot/data/data.json");this.appData=await t.json(),this.appData.masterSnapshotId&&(this.a=this.appData.masterSnapshotId)}catch(t){console.error(t)}}async setMasterSnapshot(t){const s=await this.alertCtrl.create({header:`Set as Master: ${t}`,message:`Are you sure you want to master snapshot to ${t}?`,buttons:[{text:"Cancel",handler:()=>{s.dismiss()}},{text:"Set as Master",handler:async()=>{try{const a=await fetch(`/?set_master_snapshot=${t}`);this.appData=await a.json(),s.dismiss()}catch(t){console.error(t)}}}]});await s.present()}async deleteSnapshot(t){const s=await this.alertCtrl.create({header:`Delete ${t}`,message:`Are you sure you want to delete snapshot ${t}?`,buttons:[{text:"Cancel",handler:()=>{s.dismiss()}},{text:"Delete",handler:async()=>{try{const a=await fetch(`/?delete_snapshot=${t}`);this.appData=await a.json(),s.dismiss()}catch(t){console.error(t)}}}]});await s.present()}render(){return[t("ion-header",null,t("ion-toolbar",{color:"primary"},t("ion-title",null,"Screenshot Comparison"),t("ion-buttons",{slot:"end"},t("ion-button",{disabled:null===this.a||null===this.b,href:`/${this.a}/${this.b}`},"Compare")))),t("ion-content",null,t("table",{class:"snapshot-list"},this.appData.snapshots.map(a=>{const e={"is-master":a.id===this.appData.masterSnapshotId};return t("tr",{key:a.id,class:e},t("td",null,t("ion-radio",{onClick:()=>{this.a===a.id?this.a=null:(this.a=a.id,this.b===a.id&&(this.b=null))},checked:this.a===a.id})),t("td",null,t("ion-radio",{onClick:()=>{this.b===a.id?this.b=null:(this.b=a.id,this.a===a.id&&(this.a=null))},checked:this.b===a.id})),t("td",null,t("ion-anchor",{href:"/"+a.id},a.id)),t("td",{class:"desc"},a.desc),t("td",null,s(a.timestamp)),this.isAdmin?t("td",null,t("ion-anchor",{tappable:!0,hidden:this.appData.masterSnapshotId===a.id,onClick:this.setMasterSnapshot.bind(this,a.id)},"Set as Master")):null,this.isAdmin?t("td",null,t("ion-anchor",{tappable:!0,hidden:this.appData.masterSnapshotId===a.id,onClick:this.deleteSnapshot.bind(this,a.id),color:"danger"},"Delete")):null)})))]}static get is(){return"snapshot-list"}static get properties(){return{a:{state:!0},alertCtrl:{connect:"ion-alert-controller"},appData:{state:!0},b:{state:!0}}}static get style(){return".is-master{background:#efffe6}table.snapshot-list{margin:8px;width:100%;font-size:12px}.snapshot-list td{padding:4px 8px}.snapshot-list .desc{white-space:nowrap}"}}class o{create(t){return a(this.doc.createElement("ion-alert"),t)}dismiss(t,s,a){return e(this.doc,t,s,"ion-alert",a)}getTop(){return n(this.doc,"ion-alert")}static get is(){return"ion-alert-controller"}static get properties(){return{create:{method:!0},dismiss:{method:!0},doc:{context:"document"},getTop:{method:!0}}}}export{i as SnapshotList,o as IonAlertController};