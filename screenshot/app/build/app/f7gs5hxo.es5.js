/*! Built with http://stenciljs.com */
var __awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(o,a)}c((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};App.loadBundle("f7gs5hxo",["exports"],function(t){var e=window.App.h,n=function(){function t(){this.screenshotDiffs=[]}return t.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,r,s,i,o,a,c,u,l=this;return __generator(this,function(h){switch(h.label){case 0:return h.trys.push([0,7,,8]),t=fetch("/screenshot/data/snapshots/"+this.a+".json"),e=fetch("/screenshot/data/snapshots/"+this.b+".json"),n=fetch("/screenshot/data/data.json"),[4,t];case 1:return r=h.sent(),[4,e];case 2:return s=h.sent(),[4,n];case 3:return i=h.sent(),[4,r.json()];case 4:return o=h.sent(),[4,s.json()];case 5:return a=h.sent(),[4,i.json()];case 6:return c=h.sent(),this.masterSnapshotId=c.masterSnapshotId,this.screenshotDiffs=o.screenshots.map(function(t){return{id:t.id,desc:t.desc,imageA:"/screenshot/images/"+t.image,imageB:"",diff:null}}),a.screenshots.forEach(function(t){var e=l.screenshotDiffs.find(function(e){return e.id===t.id});e&&(e.imageB="/screenshot/images/"+t.image)}),this.screenshotDiffs=this.screenshotDiffs.filter(function(t){return t.imageA!==t.imageB}),this.screenshotDiffs.forEach(function(t){t.diff=window.resemble(t.imageA).compareTo(t.imageB).onComplete(function(e){e.misMatchPercentage>.5&&(document.getElementById("diff-"+t.id).src=e.getImageDataUrl(),document.getElementById("mismatch-"+t.id).textContent=e.misMatchPercentage,document.getElementById("row-"+t.id).hidden=!1)})}),this.title="Compare: "+this.a+(this.a===c.masterSnapshotId?" (master)":"")+" to "+this.b+(this.b===c.masterSnapshotId?" (master)":""),[3,8];case 7:return u=h.sent(),console.error(u),[3,8];case 8:return[2]}})})},t.prototype.render=function(){return[e("ion-header",null,e("ion-toolbar",{color:"primary"},e("ion-buttons",{slot:"start"},e("ion-back-button",{defaultHref:"/"})),e("ion-title",null,this.title))),e("ion-content",{padding:!0},e("table",{class:"snapshot-compare"},e("tr",null,e("td",null,e("ion-anchor",{href:"/"+this.a},this.a," ",this.a===this.masterSnapshotId?" (master)":"")),e("td",null,e("ion-anchor",{href:"/"+this.b},this.b," ",this.b===this.masterSnapshotId?" (master)":"")),e("td",null,"Diff"),e("td",null,"Analysis")),this.screenshotDiffs.map(function(t){return e("tr",{id:"row-"+t.id,hidden:!0},e("td",null,e("img",{src:t.imageA})),e("td",null,e("img",{src:t.imageB})),e("td",null,e("img",{src:"",id:"diff-"+t.id})),e("td",null,e("p",null,t.desc),e("p",null,e("strong",null,"Mismatch"),": ",e("span",{id:"mismatch-"+t.id}),"%")))})))]},Object.defineProperty(t,"is",{get:function(){return"snapshot-compare"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{a:{type:String,attr:"a"},b:{type:String,attr:"b"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"table.snapshot-compare{width:100%;border-left:1px solid #000;border-bottom:1px solid #000;font-size:12px}.snapshot-compare td{border-top:1px solid #000;border-right:1px solid #000;padding:10px;vertical-align:top}.snapshot-compare .id{margin-top:0;white-space:nowrap}"},enumerable:!0,configurable:!0}),t}();t.SnapshotCompare=n,Object.defineProperty(t,"__esModule",{value:!0})});